:::note info
generated by LLM
:::


# Parser モジュール実装完了

## 実装内容

### 1. `src/parser/move_parser.rs`
- `NotationMove` enum: ルービックキューブの回転操作を表現
  - U, U2, U', D, D2, D', R, R2, R', L, L2, L', F, F2, F', B, B2, B'
- 主な機能:
  - `from_str`: 文字列からNotationMoveへの変換
  - `to_string`: NotationMoveから文字列への変換
  - `reversed`: 逆操作を返す (U → U', U' → U, U2 → U2)
  - `doubled`: 2倍操作を返す (U → U2, U' → U2)
- `Sequence`: NotationMoveのベクタ型
- `parse_sequence`: 文字列からSequenceへの変換
- `reversed_sequence`: Sequenceの逆操作を返す

### 2. `src/parser/notation_expander.rs`
- `Notation` enum: 3つの記法を表現
  - `Comma`: カンマ記法 (seq_a, seq_b)
  - `Slash`: スラッシュ記法 (move/seq)
  - `Colon`: コロン記法 (seq_a: seq_c)
  - `Plain`: プレーンなシーケンス

- 変換規則:
  1. **カンマ記法**: `seq_a, seq_b` → `seq_a seq_b reversed(seq_a) reversed(seq_b)`
  2. **スラッシュ記法**: `m/seq` → `m seq doubled(m) reversed(seq) m`
  3. **コロン記法**: `seq_a: seq_c` → `seq_c seq_a reversed(seq_c)`

- 主な関数:
  - `parse_notation`: 文字列から記法を認識してパース
  - `parse_and_expand`: 記法を展開して最終的なSequenceを返す（再帰的にネストを処理）

### 3. `src/parser/mod.rs`
- モジュールの公開インターフェース

## 使用例

```rust
use rubiks_cube_simulator::parser::{parse_and_expand, sequence_to_string};

// カンマ記法
let result = parse_and_expand("U, R D R'").unwrap();
println!("{}", sequence_to_string(&result));
// 出力: U R D R' U' R D' R'

// スラッシュ記法
let result = parse_and_expand("D/R' U' R").unwrap();
println!("{}", sequence_to_string(&result));
// 出力: D R' U' R D2 R' U R D

// ネスト記法
let result = parse_and_expand("R' D': U/R D R'").unwrap();
println!("{}", sequence_to_string(&result));
// 出力: R' D' U R D R' U2 R D' R' U D R
```

## テストケース

各ファイルにunit testを実装済み:
- `move_parser.rs`: Move/Sequenceの基本操作テスト
- `notation_expander.rs`: 各記法の展開テスト、ネストのテスト

## Example プログラム

`examples/notation_expander.rs`:
- 事前定義されたテストケースの実行
- インタラクティブモードで任意の記法を試せる

実行方法:
```bash
cargo run --example notation_expander
```

## ドキュメントとの対応

実装は `docs/011_3style_csv_parser.md` の「手順のパース」セクションに完全に準拠:
- EBNF構文定義に基づいた実装
- 3つの変換規則を正確に実装
- ネストした記法の再帰的処理をサポート

## 今後の拡張可能性

- CSV値の自動展開機能の追加
- エラーメッセージの改善
- より複雑なネスト処理のサポート
- パフォーマンス最適化
