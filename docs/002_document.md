# ãƒ«ãƒ¼ãƒ“ãƒƒã‚¯ã‚­ãƒ¥ãƒ¼ãƒ–ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼é–‹ç™ºãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Rustã§ãƒ«ãƒ¼ãƒ“ãƒƒã‚¯ã‚­ãƒ¥ãƒ¼ãƒ–ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’é–‹ç™ºã™ã‚‹ãŸã‚ã®æŠ€è¡“ä»•æ§˜ã¨å®Ÿè£…è©³ç´°ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚[Qiitaã®è¨˜äº‹](https://qiita.com/7y2n/items/a840e44dba77b1859352)ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸPythonå®Ÿè£…ã‚’Rustã«ç§»æ¤ã—ãŸã‚‚ã®ã§ã™ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
rubiks_cube_simulator/
â”œâ”€â”€ Cargo.toml
â””â”€â”€ src/
    â””â”€â”€ main.rs
```

## æŠ€è¡“ä»•æ§˜

### ã‚­ãƒ¥ãƒ¼ãƒ–ã®çŠ¶æ…‹è¡¨ç¾

ãƒ«ãƒ¼ãƒ“ãƒƒã‚¯ã‚­ãƒ¥ãƒ¼ãƒ–ã®çŠ¶æ…‹ã¯4ã¤ã®ãƒ™ã‚¯ãƒˆãƒ«ã§è¡¨ç¾ã•ã‚Œã¾ã™ï¼š

| ãƒ™ã‚¯ãƒˆãƒ« | åç§° | è¦ç´ æ•° | å€¤ã®ç¯„å›² | èª¬æ˜ |
|---------|------|--------|----------|------|
| `cp` | Corner Permutation | 8 | 0-7 | ã‚³ãƒ¼ãƒŠãƒ¼ãƒ‘ãƒ¼ãƒ„ã®ä½ç½®æƒ…å ± |
| `co` | Corner Orientation | 8 | 0-2 | ã‚³ãƒ¼ãƒŠãƒ¼ãƒ‘ãƒ¼ãƒ„ã®å‘ãï¼ˆ0=æ­£å¸¸, 1=æ™‚è¨ˆå›ã‚Š, 2=åæ™‚è¨ˆå›ã‚Šï¼‰ |
| `ep` | Edge Permutation | 12 | 0-11 | ã‚¨ãƒƒã‚¸ãƒ‘ãƒ¼ãƒ„ã®ä½ç½®æƒ…å ± |
| `eo` | Edge Orientation | 12 | 0-1 | ã‚¨ãƒƒã‚¸ãƒ‘ãƒ¼ãƒ„ã®å‘ãï¼ˆ0=æ­£å¸¸, 1=åè»¢ï¼‰ |

### ãƒ‘ãƒ¼ãƒ„ã®ãƒŠãƒ³ãƒãƒªãƒ³ã‚°

ã‚­ãƒ¥ãƒ¼ãƒ–ã®å„ãƒ‘ãƒ¼ãƒ„ã«ã¯ä»¥ä¸‹ã®è¦å‰‡ã§ç•ªå·ãŒæŒ¯ã‚‰ã‚Œã¦ã„ã¾ã™ï¼š

**è¦–ç‚¹ï¼š** ä¸Šé¢(U)ãŒç™½ã€æ‰‹å‰é¢(F)ãŒç·‘ã§å›ºå®š

#### ã‚³ãƒ¼ãƒŠãƒ¼ãƒ‘ãƒ¼ãƒ„ï¼ˆ8å€‹ï¼‰
```
   0â”€â”€â”€1
   â”‚   â”‚
   3â”€â”€â”€2

   4â”€â”€â”€5
   â”‚   â”‚
   7â”€â”€â”€6
```
- 0: å·¦ä¸Šå¾Œ (ç™½ãƒ»ã‚ªãƒ¬ãƒ³ã‚¸ãƒ»é’)
- 1: å³ä¸Šå¾Œ (ç™½ãƒ»é’ãƒ»èµ¤)
- 2: å³ä¸Šå‰ (ç™½ãƒ»èµ¤ãƒ»ç·‘)
- 3: å·¦ä¸Šå‰ (ç™½ãƒ»ç·‘ãƒ»ã‚ªãƒ¬ãƒ³ã‚¸)
- 4: å·¦ä¸‹å¾Œ (é»„ãƒ»é’ãƒ»ã‚ªãƒ¬ãƒ³ã‚¸)
- 5: å³ä¸‹å¾Œ (é»„ãƒ»èµ¤ãƒ»é’)
- 6: å³ä¸‹å‰ (é»„ãƒ»ç·‘ãƒ»èµ¤)
- 7: å·¦ä¸‹å‰ (é»„ãƒ»ã‚ªãƒ¬ãƒ³ã‚¸ãƒ»ç·‘)

#### ã‚¨ãƒƒã‚¸ãƒ‘ãƒ¼ãƒ„ï¼ˆ12å€‹ï¼‰
```
     0
   â”Œâ”€1â”€2â”€â”
   3     4
   â””â”€5â”€6â”€â”˜
     7
   â”Œâ”€8â”€9â”€â”
  10    11
   â””â”€â”€â”€â”€â”€â”˜
```

### æ“ä½œã®è¡¨ç¾

**é‡è¦ãªè¨­è¨ˆåŸå‰‡ï¼š** çŠ¶æ…‹ã¨æ“ä½œã¯åŒä¸€ã®Stateæ§‹é€ ä½“ã§è¡¨ç¾ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã¯ç¾¤è«–çš„ã«æ­£ã—ã„è¡¨ç¾æ–¹æ³•ã§ã™ã€‚

#### åŸºæœ¬æ“ä½œï¼ˆ18ç¨®é¡ï¼‰
- **6é¢ã®90åº¦æ™‚è¨ˆå›ã‚Šï¼š** U, D, L, R, F, B
- **6é¢ã®180åº¦å›è»¢ï¼š** U2, D2, L2, R2, F2, B2  
- **6é¢ã®90åº¦åæ™‚è¨ˆå›ã‚Šï¼š** U', D', L', R', F', B'

#### Half Turn Metric
æ“ä½œã®æ•°ãˆæ–¹ã¨ã—ã¦ã€90åº¦å›è»¢ã‚‚180åº¦å›è»¢ã‚‚ã€Œ1æ‰‹ã€ã¨ã—ã¦ã‚«ã‚¦ãƒ³ãƒˆã—ã¾ã™ã€‚

## ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### Stateæ§‹é€ ä½“

```rust
#[derive(Debug, Clone, PartialEq)]
pub struct State {
    pub cp: [u8; 8],  // Corner Permutation
    pub co: [u8; 8],  // Corner Orientation
    pub ep: [u8; 12], // Edge Permutation
    pub eo: [u8; 12], // Edge Orientation
}
```

#### å®ŒæˆçŠ¶æ…‹
```rust
State {
    cp: [0, 1, 2, 3, 4, 5, 6, 7],
    co: [0, 0, 0, 0, 0, 0, 0, 0],
    ep: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
    eo: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
}
```

### RubiksCubeæ§‹é€ ä½“

```rust
pub struct RubiksCube {
    moves: HashMap<String, State>,
}
```

æ“ä½œåï¼ˆ"R", "U2", "F'"ãªã©ï¼‰ã‚’ã‚­ãƒ¼ã¨ã—ã¦ã€å¯¾å¿œã™ã‚‹æ“ä½œçŠ¶æ…‹ã‚’HashMapã§ç®¡ç†ã—ã¾ã™ã€‚

## ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

### æ“ä½œã®é©ç”¨

çŠ¶æ…‹ã«æ“ä½œã‚’é©ç”¨ã™ã‚‹éš›ã®è¨ˆç®—å¼ï¼š

#### ã‚³ãƒ¼ãƒŠãƒ¼ãƒ‘ãƒ¼ãƒ„
```rust
// Permutation
new_cp[i] = self.cp[move_state.cp[i] as usize];

// Orientation
new_co[i] = (self.co[move_state.cp[i] as usize] + move_state.co[i]) % 3;
```

#### ã‚¨ãƒƒã‚¸ãƒ‘ãƒ¼ãƒ„
```rust
// Permutation  
new_ep[i] = self.ep[move_state.ep[i] as usize];

// Orientation
new_eo[i] = (self.eo[move_state.ep[i] as usize] + move_state.eo[i]) % 2;
```

### ã‚¹ã‚¯ãƒ©ãƒ³ãƒ–ãƒ«ã®å‡¦ç†

ã‚¹ã‚¯ãƒ©ãƒ³ãƒ–ãƒ«æ–‡å­—åˆ—ã‚’ç©ºç™½ã§åˆ†å‰²ã—ã€å„æ“ä½œã‚’é †æ¬¡é©ç”¨ï¼š

```rust
pub fn scramble_to_state(&self, scramble: &str) -> State {
    let mut state = State::solved();
    for move_name in scramble.split_whitespace() {
        if let Some(move_state) = self.moves.get(move_name) {
            state = state.apply_move(move_state);
        }
    }
    state
}
```

## å®Ÿè£…ã®è©³ç´°

### åŸºæœ¬æ“ä½œã®å®šç¾©

6ã¤ã®åŸºæœ¬æ“ä½œï¼ˆ90åº¦æ™‚è¨ˆå›ã‚Šï¼‰ã¯æ‰‹å‹•ã§å®šç¾©ã—ã€180åº¦å›è»¢ã¨åæ™‚è¨ˆå›ã‚Š90åº¦å›è»¢ã¯ä»¥ä¸‹ã®æ–¹æ³•ã§ç”Ÿæˆï¼š

```rust
// 180åº¦å›è»¢ = 90åº¦æ“ä½œã‚’2å›é©ç”¨
let double_move = base_move.apply_move(&base_move);

// åæ™‚è¨ˆå›ã‚Š90åº¦ = 90åº¦æ“ä½œã‚’3å›é©ç”¨
let counter_move = double_move.apply_move(&base_move);
```

### Rustã®æ‰€æœ‰æ¨©å¯¾å¿œ

HashMapã¸ã®æŒ¿å…¥æ™‚ã«æ‰€æœ‰æ¨©ãŒç§»å‹•ã™ã‚‹ãŸã‚ã€`clone()`ã‚’ä½¿ç”¨ï¼š

```rust
cube.moves.insert(format!("{}2", face), double_move.clone());
```

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
```bash
cargo new rubiks_cube_simulator
cd rubiks_cube_simulator
```

### 2. ãƒ“ãƒ«ãƒ‰ãƒ»å®Ÿè¡Œ
```bash
cargo run
```

### 3. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
cargo test
```

## ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### åŸºæœ¬ãƒ†ã‚¹ãƒˆ
- å®ŒæˆçŠ¶æ…‹ã®æ¤œè¨¼
- Ræ“ä½œã®çµæœæ¤œè¨¼ï¼ˆè¨˜äº‹ã®ä¾‹ã¨ç…§åˆï¼‰
- R2æ“ä½œã®æ¤œè¨¼ï¼ˆRã‚’2å›é©ç”¨ã¨åŒç­‰ï¼‰

### ã‚¹ã‚¯ãƒ©ãƒ³ãƒ–ãƒ«ãƒ†ã‚¹ãƒˆ
è¨˜äº‹ã®ä¾‹ã€ŒL D2 R U2 L F2 U2 L F2 R2 B2 R U' R' U2 F2 R' D B' F2ã€ã®çµæœï¼š

```
cp: [4, 3, 2, 1, 6, 5, 7, 0]
co: [0, 0, 1, 0, 2, 2, 2, 2]
ep: [2, 9, 4, 10, 0, 7, 3, 1, 11, 5, 6, 8]
eo: [1, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0]
```

## å®Ÿè¡Œä¾‹

```
ğŸ§© ãƒ«ãƒ¼ãƒ“ãƒƒã‚¯ã‚­ãƒ¥ãƒ¼ãƒ–ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼
=====================================
å®ŒæˆçŠ¶æ…‹:
Corner Permutation: [0, 1, 2, 3, 4, 5, 6, 7]
Corner Orientation: [0, 0, 0, 0, 0, 0, 0, 0]
Edge Permutation:   [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
Edge Orientation:   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

Ræ“ä½œå¾Œ:
Corner Permutation: [0, 2, 6, 3, 4, 1, 5, 7]
Corner Orientation: [0, 1, 2, 0, 0, 2, 1, 0]
Edge Permutation:   [0, 5, 9, 3, 4, 2, 6, 7, 8, 1, 10, 11]
Edge Orientation:   [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]

åˆ©ç”¨å¯èƒ½ãªæ“ä½œ:
  B B' B2  D D' D2
  F F' F2  L L' L2  
  R R' R2  U U' U2
``